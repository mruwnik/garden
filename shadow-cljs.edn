{:source-paths ["src" "dev" "test"]

 :lein true  ;; Use project.clj for dependencies

 :dev-http {3449 "resources/public"}

 :nrepl {:port 7888}

 :builds
 {:dev
  {:target :browser
   :output-dir "resources/public/js/compiled"
   :asset-path "js/compiled"
   :modules {:garden {:init-fn garden.core/init
                      :entries [garden.core]}}
   :devtools {:after-load garden.core/on-js-reload
              :preloads [devtools.preload]}}

  :min
  {:target :browser
   :output-dir "resources/public/js/compiled"
   :asset-path "js/compiled"
   :modules {:garden {:init-fn garden.core/init
                      :entries [garden.core]}}
   :compiler-options {:optimizations :advanced}}

  ;; Fast unit tests (Node.js)
  :test
  {:target :node-script
   :output-to "target/test/node-tests.js"
   :main garden.test-runner/run}

  ;; Browser tests for canvas/DOM code
  :browser-test
  {:target :browser-test
   :test-dir "resources/public/js/test"
   :ns-regexp "-test$"
   :devtools {:http-port 8021
              :http-root "resources/public"}}}}
